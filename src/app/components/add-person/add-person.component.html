<div class="register-form container">
  <form [formGroup]="myForm" #ff="ngForm" (ngSubmit)="onSubmit()">
    <input formGroupName="id" type="hidden">

    <div class="form-group">
      <label class="fw-bold mt-2">Name:</label>
      <input type="text" formControlName="name" class="form-control"
        [ngClass]="{ 'is-invalid': submitted && f['name'].errors }" />
      <div *ngIf="submitted && f['name'].errors" class="invalid-feedback">
        <div *ngIf="f['name'].errors['required']">Name is required</div>

      </div>
    </div>

    <div class="form-group">
      <label class="fw-bold">Address:</label>
      <input type="text" formControlName="address" class="form-control"
        [ngClass]="{ 'is-invalid': submitted && f['address'].errors }" />
      <div *ngIf="submitted && f['address'].errors" class="invalid-feedback">
        <div *ngIf="f['address'].errors['required']">address is required</div>
      </div>
    </div>

    <div class="form-group">
      <label class="fw-bold">Email:</label>
      <input type="text" formControlName="email" class="form-control"
        [ngClass]="{ 'is-invalid': submitted && f['email'].errors }" />
      <div *ngIf="submitted && f['email'].errors" class="invalid-feedback">
        <div *ngIf="f['email'].errors['required']">Email is required</div>
        <div *ngIf="f['email'].errors['email']">Email is invalid</div>
      </div>
    </div>

    <div class="form-group">
      <label class="fw-bold">Phone:</label>
      <input type="text" formControlName="phoneNumber" class="form-control"
        [ngClass]="{ 'is-invalid': submitted && f['phoneNumber'].errors }" />
      <div *ngIf="submitted && f['phoneNumber'].errors" class="invalid-feedback">
        <div *ngIf="f['phoneNumber'].errors['pattern']">
          Invalid Phone Number
        </div>

      </div>
    </div>


    <p class="text-danger fw-bold mt-3">Add Qualification</p>
    <hr>

    <div formArrayName="educationaInfo" *ngFor="let time of this.fa?.controls; let i = index;">
      <!-- <div [formGroupName]="i" style="display: flex;flex-direction:column;gap: 10px;"> -->
      <div [formGroupName]="i">


        <div class="form-group">
          <label class="fw-bold">Qualification:</label>

          <select formControlName="qualification" class="form-control"
            [ngClass]="{ 'is-invalid': submitted && getValidity(i) }">
            <option [value]="'SSC'">SSC</option>
            <option [value]="'HSC'">HSC</option>
            <option [value]="'BSC'">BSC</option>
            <option [value]="'MSC'">MSC</option>
          </select>

          <div *ngIf="submitted && getValidity(i)" class="invalid-feedback">
            <div *ngIf="getValidity(i)">qualification is required</div>

          </div>
        </div>

        <div class="form-group">
          <label class="fw-bold">Grade:</label>
          <input placeholder="grade" type="number" formControlName="grade" class="form-control"
            [ngClass]="{ 'is-invalid': submitted && getValidity(i) }">

          <div *ngIf="submitted && getValidity(i)" class="invalid-feedback">
            <div *ngIf="getValidity(i)">grade is required</div>

          </div>
        </div>

        <div class="form-group">
          <label class="fw-bold">Institute:</label>
          <input placeholder="institute" type="text" formControlName="institute" class="form-control"
            [ngClass]="{ 'is-invalid': submitted && getValidity(i) }">

          <div *ngIf="submitted && getValidity(i)" class="invalid-feedback">
            <div *ngIf="getValidity(i)">institute is required</div>

          </div>
        </div>

        <div class="form-group">
          <label class="fw-bold">From:</label>
          <input placeholder="from" type="date" formControlName="from" class="form-control"
            [ngClass]="{ 'is-invalid': submitted && getValidity(i) }">

          <div *ngIf="submitted && getValidity(i)" class="invalid-feedback">
            <div *ngIf="getValidity(i)">From date is required</div>

          </div>
        </div>

        <div class="form-group">
          <label class="fw-bold">To:</label>
          <input placeholder="to" type="date" formControlName="to" class="form-control"
            [ngClass]="{ 'is-invalid': submitted && getValidity(i) }">

          <div *ngIf="submitted && getValidity(i)" class="invalid-feedback">
            <div *ngIf="getValidity(i)">To date is required</div>

          </div>
        </div>

        <div class="mt-4 mb-4">
          <button class="btn btn-primary gap-5" (click)="addGroup()">Add New Qualification</button>
        <button (click)="removeGroup(i)" class="btn btn-danger">X</button>
        </div>

      </div>
    </div>

    <div class="form-group mb-3">
      <button type="submit" class="btn btn-primary">Submit</button>
      <button type="button" class="btn btn-warning float-right">
        Reset
      </button>
    </div>
  </form>

</div>

<div>
  <!-- <pre>{{myForm.value | json}}</pre> -->
</div>